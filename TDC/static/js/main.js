const mobileMenuBtn=document.querySelector(".mobile-menu-btn");const mobileNav=document.querySelector("nav.mobile-nav");mobileMenuBtn.addEventListener("click",()=>{const expanded=mobileMenuBtn.getAttribute("aria-expanded")==="true"||!1;mobileMenuBtn.setAttribute("aria-expanded",!expanded);mobileNav.classList.toggle("show")});const navLinks=document.querySelectorAll("nav.desktop-nav a, nav.mobile-nav a");navLinks.forEach(link=>{link.addEventListener("click",(e)=>{e.preventDefault();mobileNav.classList.remove("show");mobileMenuBtn.setAttribute("aria-expanded",!1);const targetId=link.getAttribute("href").substring(1);const targetElem=document.getElementById(targetId);if(targetElem){targetElem.focus({preventScroll:!0});window.scrollTo({top:targetElem.offsetTop-64,behavior:'smooth'});navLinks.forEach(l=>l.classList.remove("active"));link.classList.add("active")}})});const btnLoginHeader=document.getElementById("btn-login-header");const btnRegisterHeader=document.getElementById("btn-register-header");const btnQMK=document.getElementById("btn-QMK");const btndp=document.getElementById("btn-dp");const btnnt=document.getElementById("btn-nap-the-header");const modalLogin=document.getElementById("modal-login");const modalRegister=document.getElementById("modal-register");const modalQMK=document.getElementById("modal-QMK");const modaldp=document.getElementById("modal-dp");const modalnt=document.getElementById("modal-nap-the");const modalLoginClose=document.getElementById("modal-login-close");const modalQMKClose=document.getElementById("modal-QMK-close");const modaldpClose=document.getElementById("modal-dp-close");const modalntClose=document.getElementById("modal-nap-the-close");const modalRegisterClose=document.getElementById("modal-register-close");function openModal(modal){modal.classList.add("show");modal.focus()}
function closeModal(modal){modal.classList.remove("show")}
if(btnLoginHeader&&modalLogin){btnLoginHeader.addEventListener("click",()=>openModal(modalLogin))}
if(btnQMK&&modalQMK){btnQMK.addEventListener("click",()=>openModal(modalQMK))}
if(btndp&&modaldp){btndp.addEventListener("click",()=>openModal(modaldp))}
if(btnnt&&modalnt){btnnt.addEventListener("click",()=>openModal(modalnt))}
if(btnRegisterHeader&&modalRegister){btnRegisterHeader.addEventListener("click",()=>openModal(modalRegister))}
if(modalLoginClose&&modalLogin){modalLoginClose.addEventListener("click",()=>closeModal(modalLogin))}
if(modalQMKClose&&modalQMK){modalQMKClose.addEventListener("click",()=>closeModal(modalQMK))}
if(modalntClose&&modalnt){modalntClose.addEventListener("click",()=>closeModal(modalnt))}
if(modaldpClose&&modaldp){modaldpClose.addEventListener("click",()=>closeModal(modaldp))}
if(modalRegisterClose&&modalRegister){modalRegisterClose.addEventListener("click",()=>closeModal(modalRegister))}[modalLogin,modalRegister].forEach(modal=>{if(modal){modal.addEventListener("click",(e)=>{if(e.target===modal)closeModal(modal)})}});const tabNapTien=document.getElementById("tab-nap-tien");const tabNapThe=document.getElementById("tab-nap-the");const paymentFormMoney=document.getElementById("payment-form-money");const paymentFormCard=document.getElementById("payment-form-card");const paymentSuccess=document.getElementById("payment-success");const tabs=[tabNapTien,tabNapThe];const panels=[paymentFormMoney,paymentFormCard];tabs.forEach((tab,idx)=>{tab.addEventListener("click",()=>{tabs.forEach((t,i)=>{t.classList.toggle("active",i===idx);t.setAttribute("aria-selected",i===idx);panels[i].style.display=i===idx?"block":"none"});paymentSuccess.hidden=!0});tab.addEventListener("keydown",e=>{if(e.key==="ArrowLeft"||e.key==="ArrowRight"){e.preventDefault();let newIndex=e.key==="ArrowRight"?(idx+1)%tabs.length:(idx+tabs.length-1)%tabs.length;tabs[newIndex].focus();tabs[newIndex].click()}})});const downloadBtn=document.getElementById("download-btn");if(downloadBtn){downloadBtn.addEventListener("click",()=>{alert("Bắt đầu tải phần mềm...");window.location.href="https://dl.hetcuu.com/TDC.exe"})}const faqBtns=document.querySelectorAll(".faq-question-btn");faqBtns.forEach(btn=>{btn.addEventListener("click",function(){const expanded=this.getAttribute("aria-expanded")==="true";faqBtns.forEach(b=>{b.setAttribute("aria-expanded","false");const ansId=b.getAttribute("aria-controls");if(ansId){const ans=document.getElementById(ansId);if(ans)ans.style.display="none"};const icon=b.querySelector(".faq-icon");if(icon)icon.textContent="add"});if(!expanded){this.setAttribute("aria-expanded","true");const ansId=this.getAttribute("aria-controls");if(ansId){const ans=document.getElementById(ansId);if(ans)ans.style.display="block"};const icon=this.querySelector(".faq-icon");if(icon)icon.textContent="remove"}});btn.addEventListener("keydown",function(e){if(e.key==="Enter"||e.key===" "){e.preventDefault();btn.click()}});const ansId=btn.getAttribute("aria-controls");if(ansId){const ans=document.getElementById(ansId);if(ans)ans.style.display="none"}});
